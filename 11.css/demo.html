<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>11.css - Win11é¢¨ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ ãƒ‡ãƒ¢</title>
<link rel="stylesheet" href="https://sakuzyokun.github.io/11.css/11.css">
<style>
  /* ã‚¿ã‚¹ã‚¯ãƒãƒ¼ */
  body {
    margin: 0;
    font-family: "Segoe UI", "Noto Sans JP", sans-serif;
    background: url('https://sakuzyokun.github.io/11.css/Windows11_Dark.jpg') center/cover no-repeat;
    overflow: hidden;
  }
  .taskbar {
    position: fixed;
    bottom: 0; left: 0;
    width: 100%; height: 48px;
    background: rgba(255,255,255,0.5);
    backdrop-filter: blur(20px);
    display: flex;
    align-items: center;
    padding: 0 10px;
    box-sizing: border-box;
  }
  .start-btn {
    width: 40px;
    height: 40px;
    margin-right: 8px;
    border-radius: 8px;
    border: none;
    background: rgba(255,255,255,0.8);
    cursor: pointer;
    font-size: 18px;
  }
</style>
</head>
<body>

<!-- ã‚¹ã‚¿ãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
<div class="start-menu" id="startMenu" style="display:none; position: fixed; bottom: 60px; left: 50%; transform: translateX(-50%); width: 400px; background: rgba(255,255,255,0.8); backdrop-filter: blur(20px); border-radius: 12px; padding: 20px; box-sizing: border-box;">
  <h3>ã‚¹ã‚¿ãƒ¼ãƒˆ</h3>
  <p>ã“ã“ã«ã‚¢ãƒ—ãƒªä¸€è¦§ãªã©ã‚’é…ç½®ã§ãã¾ã™</p>
</div>

<!-- ã‚¿ã‚¹ã‚¯ãƒãƒ¼ -->
<div class="taskbar">
  <button class="start-btn" id="startBtn">âŠ</button>
</div>

<!-- ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦1 -->
<div class="win11-window" id="win1">
    <div class="win11-title-bar" aria-label="ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦1ã‚¿ã‚¤ãƒˆãƒ«ãƒãƒ¼">
      <span class="win11-title">ã“ã®Webãƒšãƒ¼ã‚¸ã®è©³ç´°</span>
      <div class="win11-controls">
        <button class="win11-btn" aria-label="Minimize">ğŸ—•</button>
        <button class="win11-btn" aria-label="Maximize">ğŸ—–</button>
        <button class="win11-btn close" aria-label="Close">âœ•</button>
      </div>
      </div>
      <div class="win11-window-body">
      <p>ã“ã®ã‚µã‚¤ãƒˆã®ãƒ•ã‚©ãƒ³ãƒˆã¯Windowsã§ã¯Segoe UIã€ãã®ä»–ã®OSã§ã¯Noto Sans JPã§è¡¨ç¤ºã•ã‚Œã¾ã™</p>
      <div style="text-align: right; margin-top: 20px;">
        <button class="win11-button">OK</button>
        <button class="win11-button">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      </div>
  </div>
</div>

<!-- ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦2ï¼ˆã‚µãƒ³ãƒ—ãƒ«ï¼‰ -->
<div class="win11-window" id="win2" style="position:absolute; top:150px; left:550px; width:400px;">
  <div class="win11-title-bar" aria-label="ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦2ã‚¿ã‚¤ãƒˆãƒ«ãƒãƒ¼">
    <span class="win11-title">ãƒ¡ãƒ¢å¸³</span>
    <div class="win11-controls">
      <button class="win11-btn" aria-label="Minimize">ğŸ—•</button>
      <button class="win11-btn" aria-label="Maximize">ğŸ—–</button>
      <button class="win11-btn close" class="close" aria-label="Close">âœ•</button>
    </div>
  </div>
  <div class="win11-window-body">
    <textarea style="width:100%; height:200px; resize:none;">ã“ã“ã«ãƒ¡ãƒ¢ã‚’æ›¸ã‘ã¾ã™ã€‚</textarea>
  </div>
</div>

<script>
  const windows = document.querySelectorAll('.win11-window');
  const taskbar = document.querySelector('.taskbar');
  const startBtn = document.getElementById('startBtn');
  const startMenu = document.getElementById('startMenu');

  let topZ = 10;
  let minimizedWindows = new Map();
  let minimizedBtns = {};

  // ã‚¹ã‚¿ãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼é–‹é–‰
  startBtn.addEventListener('click', () => {
    if (startMenu.style.display === 'block') {
      startMenu.style.display = 'none';
    } else {
      startMenu.style.display = 'block';
    }
  });

  // æœ€å‰é¢ã«ã™ã‚‹
  function bringToFront(win) {
    topZ++;
    windows.forEach(w => {
      if (w.style.display !== 'none') w.style.zIndex = 1;
    });
    win.style.zIndex = topZ;
  }

  windows.forEach(win => {
    const titleBar = win.querySelector('.win11-title-bar');
    const btnMin = win.querySelector('button[aria-label="Minimize"]');
    const btnMax = win.querySelector('button[aria-label="Maximize"]');
    const btnClose = win.querySelector('button.close, button[aria-label="Close"]');

    // ãƒ‰ãƒ©ãƒƒã‚°ç§»å‹•ç”¨å¤‰æ•°
    let dragging = false;
    let offsetX = 0;
    let offsetY = 0;

    // ãƒ‰ãƒ©ãƒƒã‚°é–‹å§‹
    titleBar.addEventListener('mousedown', e => {
      dragging = true;
      bringToFront(win);
      offsetX = e.clientX - win.offsetLeft;
      offsetY = e.clientY - win.offsetTop;
      e.preventDefault();
    });
    // ãƒ‰ãƒ©ãƒƒã‚°çµ‚äº†
    document.addEventListener('mouseup', () => {
      dragging = false;
    });
    // ãƒ‰ãƒ©ãƒƒã‚°ç§»å‹•
    document.addEventListener('mousemove', e => {
      if (dragging) {
        win.style.left = (e.clientX - offsetX) + 'px';
        win.style.top = (e.clientY - offsetY) + 'px';
      }
    });

    // æœ€å¤§åŒ–ãƒ»å…ƒã‚µã‚¤ã‚ºå¾©å…ƒç”¨
    let isMaximized = false;
    let savedPos = { left: 0, top: 0, width: 0, height: 0 };

    // æœ€å¤§åŒ–ãƒœã‚¿ãƒ³
    btnMax.addEventListener('click', () => {
      bringToFront(win);
      if (!isMaximized) {
        savedPos.left = win.offsetLeft;
        savedPos.top = win.offsetTop;
        savedPos.width = win.offsetWidth;
        savedPos.height = win.offsetHeight;
        win.style.left = '0';
        win.style.top = '0';
        win.style.width = window.innerWidth + 'px';
        win.style.height = (window.innerHeight - taskbar.offsetHeight) + 'px';
        isMaximized = true;
      } else {
        win.style.left = savedPos.left + 'px';
        win.style.top = savedPos.top + 'px';
        win.style.width = savedPos.width + 'px';
        win.style.height = savedPos.height + 'px';
        isMaximized = false;
      }
    });

    // æœ€å°åŒ–ãƒœã‚¿ãƒ³
    btnMin.addEventListener('click', () => {
      bringToFront(win);
      win.style.display = 'none';
      minimizedWindows.set(win.id, win);
      addTaskbarButton(win);
    });

    // é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³
    btnClose.addEventListener('click', () => {
      win.remove();
      minimizedWindows.delete(win.id);
      removeTaskbarButton(win);
    });

    // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚¯ãƒªãƒƒã‚¯ã§æœ€å‰é¢ã«
    win.addEventListener('mousedown', () => {
      bringToFront(win);
    });
  });

  function addTaskbarButton(win) {
    if (minimizedBtns[win.id]) return;
    const btn = document.createElement('button');
    btn.textContent = win.querySelector('.win11-title-bar span').textContent;
    btn.classList.add('start-btn');
    btn.style.marginLeft = '10px';
    btn.addEventListener('click', () => {
      win.style.display = 'block';
      minimizedWindows.delete(win.id);
      removeTaskbarButton(win);
      bringToFront(win);
    });
    minimizedBtns[win.id] = btn;
    taskbar.appendChild(btn);
  }

  function removeTaskbarButton(win) {
    const btn = minimizedBtns[win.id];
    if (!btn) return;
    taskbar.removeChild(btn);
    delete minimizedBtns[win.id];
  }

  // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºå¤‰æ›´ã«åˆã‚ã›ã¦æœ€å¤§åŒ–ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚‚èª¿æ•´
  window.addEventListener('resize', () => {
    windows.forEach(win => {
      if (win.style.display !== 'none') {
        const btnMax = win.querySelector('button[aria-label="Maximize"]');
        if (!btnMax) return;
        const isMaximized = win.style.width === window.innerWidth + 'px';
        if (isMaximized) {
          win.style.width = window.innerWidth + 'px';
          win.style.height = (window.innerHeight - taskbar.offsetHeight) + 'px';
        }
      }
    });
  });
</script>
</body>
</html>
