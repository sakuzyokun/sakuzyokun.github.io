<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows 98</title>
    <link rel="stylesheet" href="https://unpkg.com/98.css">
</head>
<style>
@font-face {
    font-family: 'MSGothic003';
    src: url('../fonts/msgothic002.ttf') format('truetype');
}
body {
    background-color: #008080; /* ティール背景色 */
    margin: 0; /* 画面の外枠に余白をつけない */
    padding: 0; /* 画面の外枠に余白をつけない */
    overflow: hidden; /* 画面がスクロールされないようにする */
    font-family: 'MSGothic003', 'MS Gothic', 'Pixelated MS Sans Serif', sans-serif;
}
.ie6 {
    width: 600px;
    height: 400px;
    border: 2px solid black;
    position: absolute;
    left: 50px;
    top: 50px;
}
.toolbar {
    display: flex;
    padding: 5px;
    background: #A0A0A0;
    border-bottom: 2px solid black;
}
.address-bar {
    flex-grow: 1;
    margin: 0 5px;
}
.browser-view {
    width: 100%;
    height: calc(100% - 40px);
    border: none;
}
</style>
<body>
<div class="window" id="ie6-window" style="display: none;">
    <div class="title-bar">
        <div class="title-bar-text">Internet Explorer 6</div>
        <div class="window-controls">
            <button aria-label="Minimize" onclick="minimizeWindow('ie6-window', 'Internet Explorer 6')"></button>
            <button aria-label="Maximize" onclick="maximizeWindow('ie6-window')"></button>
            <button aria-label="Close" onclick="closeWindow('ie6-window')"></button>
        </div>
    </div>
    <div class="window-body">
        <div class="toolbar">
            <button class="back">&#9664; 戻る</button>
            <button class="forward">&#9654;</button>
            <button class="refresh">&#10227;</button>
            <input type="text" class="address-bar" value="https://sakuzyokun.github.io/redstone_internet.html">
            <button class="go">	&#x27A6; 移動</button>
        </div>
        <iframe class="browser-view" src="https://sakuzyokun.github.io/redstone_internet.html"></iframe>
    </div>
</div>
<script>
let ie6History = [];
let ie6HistoryIndex = -1;

function openIE6() {
    const ieWindow = document.getElementById('ie6-window');
    if (ieWindow) {
        ieWindow.style.display = 'block';
        setActiveWindow('ie6-window'); // ウィンドウをアクティブ化
    } else {
        console.error('IE6のウィンドウが見つかりません');
    }
}

function initializeIE6() {
    const iframe = document.getElementById("ie6-browser-view");

    if (!iframe) {
        console.error("エラー: #ie6-browser-view が見つかりません");
        return;
    }

    const goButton = document.querySelector("#ie6-window .go");
    const refreshButton = document.querySelector("#ie6-window .refresh");
    const backButton = document.querySelector("#ie6-window .back");
    const forwardButton = document.querySelector("#ie6-window .forward");

    if (goButton) goButton.addEventListener("click", navigateIE6);
    if (refreshButton) refreshButton.addEventListener("click", refreshIE6);
    if (backButton) backButton.addEventListener("click", goBackIE6);
    if (forwardButton) forwardButton.addEventListener("click", goForwardIE6);

    iframe.addEventListener("load", function () {
        if (ie6HistoryIndex === -1 || ie6History[ie6HistoryIndex] !== iframe.src) {
            ie6History.push(iframe.src);
            ie6HistoryIndex = ie6History.length - 1;
        }
    });

    iframe.addEventListener("error", function () {
        showIE6Error("ページが見つかりませんでした");
    });

    document.getElementById('ie6-window')?.addEventListener('mousedown', function () {
        setActiveWindow('ie6-window');
    });

    window.addEventListener("resize", resizeIE6);
}

function navigateIE6() {
    const iframe = document.getElementById("ie6-browser-view");
    const addressBar = document.querySelector("#ie6-window .address-bar");

    if (!iframe || !addressBar) return;

    let url = addressBar.value.trim();
    if (!url.startsWith("http")) {
        url = "http://" + url;
    }

    iframe.src = url;
}

function refreshIE6() {
    const iframe = document.getElementById("ie6-browser-view");
    if (iframe) {
        iframe.src = iframe.src;
    }
}

function goBackIE6() {
    if (ie6HistoryIndex > 0) {
        ie6HistoryIndex--;
        document.getElementById("ie6-browser-view").src = ie6History[ie6HistoryIndex];
    }
}

function goForwardIE6() {
    if (ie6HistoryIndex < ie6History.length - 1) {
        ie6HistoryIndex++;
        document.getElementById("ie6-browser-view").src = ie6History[ie6HistoryIndex];
    }
}

function showIE6Error(message) {
    alert(message);
}

// ページが読み込まれたときに時間を更新し、毎分更新する
window.onload = function () {
    initializeIE6();
    openIE6();
};
</script>
</body>
